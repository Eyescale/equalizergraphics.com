<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Collage: compressor.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Collage&#160;<span id="projectnumber">0.3</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_5802ca0d9cbb3ff3930bb84814de9559.html">docs</a>      </li>
      <li class="navelem"><a class="el" href="dir_dfe980943df1255bf837600a971f54ab.html">install</a>      </li>
      <li class="navelem"><a class="el" href="dir_e1583efe384ad82271a550126fe07766.html">include</a>      </li>
      <li class="navelem"><a class="el" href="dir_c25b521fbb6b514d374aa4e936b395d8.html">co</a>      </li>
      <li class="navelem"><a class="el" href="dir_9df2013b417eaa8db27a67c760601698.html">plugins</a>      </li>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<h1>compressor.h File Reference</h1>  </div>
</div>
<div class="contents">

<p>The API to create runtime-loadable compression plugins.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;co/plugins/compressorTokens.h&gt;</code><br/>
<code>#include &lt;co/plugins/compressorTypes.h&gt;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Include dependency graph for compressor.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="compressor_8h__incl.png" border="0" usemap="#compressor_8h" alt=""/></div>
<map name="compressor_8h" id="compressor_8h">
</map>
</div>
</div>
<p><a href="compressor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEqCompressorInfo.html">EqCompressorInfo</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Information about one compressor.  <a href="structEqCompressorInfo.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Compressor Plugin API Versioning</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a1d51ce5f0244528aa917bc49d6028dec">EQ_COMPRESSOR_VERSION</a>&#160;&#160;&#160;3</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The version of the Compressor API described by this header.  <a href="#a1d51ce5f0244528aa917bc49d6028dec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a73e3544bef283514b5404cfd8504c9b7">EQ_COMPRESSOR_VERSION_1</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">At least version 1 of the Compressor API is described by this header.  <a href="#a73e3544bef283514b5404cfd8504c9b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ac88609b538391219e61844e3ecc70ce2">EQ_COMPRESSOR_VERSION_2</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">At least version 2 of the Compressor API is described by this header.  <a href="#ac88609b538391219e61844e3ecc70ce2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ab04beacee20a7cf909636b812b30636e">EQ_COMPRESSOR_VERSION_3</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">At least version 3 of the Compressor API is described by this header.  <a href="#ab04beacee20a7cf909636b812b30636e"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Compressor capability flags</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Capability flags define what special features a compressor supports.</p>
<p>They are queried from the DSO, and passed as input to certain functions to select a given capability of the plugin. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a173cd0cc6074e479774efaf9866764c7"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_INPLACE" ref="a173cd0cc6074e479774efaf9866764c7" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a173cd0cc6074e479774efaf9866764c7">EQ_COMPRESSOR_INPLACE</a>&#160;&#160;&#160;0x1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The compressor can (query time) or should (compress) write the compressed data in the same place as the uncompressed data. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a236e333245c13d38f69f04f3d8c576f8">EQ_COMPRESSOR_DATA_1D</a>&#160;&#160;&#160;0x2</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The compressor can handle linear data (query time), or the input data is linear (compress, decompress).  <a href="#a236e333245c13d38f69f04f3d8c576f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#af91c63c27e93c17d87ab66e9242cc6ed">EQ_COMPRESSOR_DATA_2D</a>&#160;&#160;&#160;0x4</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The compressor can handle two-dimensional data (query time), or the input data is two-dimensional (compress, decompress).  <a href="#af91c63c27e93c17d87ab66e9242cc6ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a41f698f99a730b71794407af791425d1">EQ_COMPRESSOR_IGNORE_ALPHA</a>&#160;&#160;&#160;0x8</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The compressor can, does or should drop the alpha channel.  <a href="#a41f698f99a730b71794407af791425d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac1e582b8b405b1d441c94077899cb587"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_IGNORE_MSE" ref="ac1e582b8b405b1d441c94077899cb587" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ac1e582b8b405b1d441c94077899cb587">EQ_COMPRESSOR_IGNORE_MSE</a>&#160;&#160;&#160;EQ_COMPRESSOR_IGNORE_ALPHA</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deprecated. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a311a438e742d0a2c6863d52e3d3918ea">EQ_COMPRESSOR_CPU</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The compressor is a CPU compressor.  <a href="#a311a438e742d0a2c6863d52e3d3918ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ab9cdfbb7d31237c83b4faeae6a11bb0d">EQ_COMPRESSOR_TRANSFER</a>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The compressor is a CPU-GPU transfer engine.  <a href="#ab9cdfbb7d31237c83b4faeae6a11bb0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a95c653f27f6f6ce1501f3362bb81ccf1">EQ_COMPRESSOR_USE_TEXTURE_RECT</a>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Capability to use a GL_TEXTURE_RECTANGLE_ARB texture as source or destination.  <a href="#a95c653f27f6f6ce1501f3362bb81ccf1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a631f4e55fc0fd01586027dd03d898c4c">EQ_COMPRESSOR_USE_TEXTURE_2D</a>&#160;&#160;&#160;0x80</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Capability to use a GL_TEXTURE_2D texture as source or destination.  <a href="#a631f4e55fc0fd01586027dd03d898c4c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#af38c4f877c9393e7bcaa3a4e04eb54a8">EQ_COMPRESSOR_USE_FRAMEBUFFER</a>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Capability to use the frame buffer as source or destination.  <a href="#af38c4f877c9393e7bcaa3a4e04eb54a8"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">DSO information interface.</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ae52553ae282ce687cca471bbdfb233fb">EqCompressorGetNumCompressors</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a777d0298b72d8aa6838607dc2144eb07">EqCompressorGetInfo</a> (const size_t n, <a class="el" href="structEqCompressorInfo.html">EqCompressorInfo</a> *const info)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query information of the nth compressor in the DSO.  <a href="#a777d0298b72d8aa6838607dc2144eb07"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Compressor lifecycle management.</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a5e7c2180cffa2dd75bbbf337315629dc">EqCompressorNewCompressor</a> (const unsigned name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiate a new compressor or a new downloader.  <a href="#a5e7c2180cffa2dd75bbbf337315629dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a4af897a56b806583b5c4b093446e07c5">EqCompressorDeleteCompressor</a> (void *const compressor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a compressor or downloader instance.  <a href="#a4af897a56b806583b5c4b093446e07c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a3bdbfcd8f109347cfb600ad6df36f5bf">EqCompressorNewDecompressor</a> (const unsigned name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiate a new decompressor or a new uploader.  <a href="#a3bdbfcd8f109347cfb600ad6df36f5bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ab34434eafc0cb92b0b898e9381593c09">EqCompressorDeleteDecompressor</a> (void *const decompressor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a decompressor instance.  <a href="#ab34434eafc0cb92b0b898e9381593c09"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">CPU Compressor worker functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a9b57dfdccdb79bc01a3ca7c6d6cfff1a">EqCompressorCompress</a> (void *const compressor, const unsigned name, void *const in, const eq_uint64_t *inDims, const eq_uint64_t flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compress data.  <a href="#a9b57dfdccdb79bc01a3ca7c6d6cfff1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a3646188a0b27e50620ea1bf2ff2cfe87">EqCompressorGetNumResults</a> (void *const compressor, const unsigned name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of results produced by the last compression.  <a href="#a3646188a0b27e50620ea1bf2ff2cfe87"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#ad1ffb6ee7db430b05413be0e8b920e07">EqCompressorGetResult</a> (void *const compressor, const unsigned name, const unsigned i, void **const out, eq_uint64_t *const outSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the ith result of the last compression.  <a href="#ad1ffb6ee7db430b05413be0e8b920e07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a033a5642aec0832c6a603f9ed1b35520">EqCompressorDecompress</a> (void *const decompressor, const unsigned name, const void *const *in, const eq_uint64_t *const inSizes, const unsigned numInputs, void *const out, eq_uint64_t *const outDims, const eq_uint64_t flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Decompress data.  <a href="#a033a5642aec0832c6a603f9ed1b35520"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Transfer engine worker functions</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a80ac98b11fc3a146c758871c024fda59">EqCompressorIsCompatible</a> (const unsigned name, const GLEWContext *glewContext)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the compressor may be used with the current OpenGL context.  <a href="#a80ac98b11fc3a146c758871c024fda59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a529e9fbf75442ee8d62c406898c1c8d1">EqCompressorDownload</a> (void *const compressor, const unsigned name, const GLEWContext *glewContext, const eq_uint64_t inDims[4], const unsigned source, const eq_uint64_t flags, eq_uint64_t outDims[4], void **out)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer frame buffer data into main memory.  <a href="#a529e9fbf75442ee8d62c406898c1c8d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EQ_PLUGIN_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="compressor_8h.html#a60382962fabfbc0cc7180ff0c2f6f562">EqCompressorUpload</a> (void *const decompressor, const unsigned name, const GLEWContext *glewContext, const void *buffer, const eq_uint64_t inDims[4], const eq_uint64_t flags, const eq_uint64_t outDims[4], const unsigned destination)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer data from main memory into GPU memory.  <a href="#a60382962fabfbc0cc7180ff0c2f6f562"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The API to create runtime-loadable compression plugins. </p>
<p>The image compositing pipeline in Equalizer uses two types of plugins: transfer engines and CPU compressors. A transfer engine downloads and uploads the data from the GPU to main memory. A CPU compressor compresses and decompresses the data produced by a transfer engine. The chain of operations for an image transfer is:</p>
<ol type="1">
<li>Select and instantiate transfer compressor for image to download</li>
<li>Run the download operation from the render thread</li>
<li>Select and instantiate a CPU compressor based on the transfer output token type</li>
<li>Run the compress operation from the transmission thread</li>
<li>Send the compressed data results to the receiving node(s)</li>
<li>Instantiate a CPU decompressor</li>
<li>Run the decompressor from the command thread</li>
<li>Select and instantiate a transfer compressor based on the CPU decompressor token type</li>
<li>Run the upload operation on each render thread</li>
</ol>
<p>The operations 3 to 7 are omitted if the input and output frame are on the same node. The operations 3 to 7 are replaced by transmitting the output data of the download operation if no matching CPU compressor is found. Plugin instances are cached and reused for subsequent operations from the same thread.</p>
<div align="center">
<img src="http://www.equalizergraphics.com/documents/design/images/imageCompression.png" alt="imageCompression.png"/>
</div>
<p>To implement a compression plugin, the following steps are to be taken:</p>
<ul>
<li>Create a new shared library named EqualizerCompressorNAME.dll (Win32), libEqualizerCompressorNAME.dylib (Mac OS X) or libEqualizerCompressorNAME.so (Linux).</li>
<li>Define EQ_PLUGIN_BUILD and then include eq/plugins/compressor.h (this header file).</li>
<li>Implement all relevant C functions from this header file. All plugins have to implement EqCompressorGetNumCompressors, EqCompressorGetInfo, EqCompressorNewCompressor, EqCompressorNewDecompressor, EqCompressorDeleteCompressor and EqCompressorDeleteDecompressor. In addition, CPU compressors have to implement EqCompressorCompress, EqCompressorDecompress, EqCompressorGetNumResults and EqCompressorGetResult. Transfer plugins have to additionally implement EqCompressorIsCompatible, EqCompressorDownload and EqCompressorUpload. The default Equalizer compressors in src/lib/compressor may be used as a template.</li>
<li>Put the library in the plugin search path (see eq::Global::getPluginDirectories(), defaults to EQ_PLUGIN_PATH or "/usr/local/share/Equalizer/plugins;.eqPlugins;$HOME/.eqPlugins;$PWD;$LD_LIBRARY_PATH".</li>
<li>Run the image unit test (tests/image) to verify your plugin.</li>
<li>Set the compression ratio and speed according to the output of the image unit test. Use the Equalizer RLE compressor as baseline.</li>
<li>Request official names for your compressors.</li>
</ul>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="compressorTypes_8h.html" title="Compression plugin names.">plugins/compressorTypes.h</a>, <a class="el" href="compressorTokens_8h.html" title="Input and output token type definitions for compression plugins.">plugins/compressorTokens.h</a></dd></dl>
<h2>Changes</h2>
<p>Version 3</p>
<ul>
<li>Added GPU-based compression during upload and download:<ul>
<li>Added functions: EqCompressorIsCompatible, EqCompressorDownload, EqCompressorUpload</li>
<li>Added members in <a class="el" href="structEqCompressorInfo.html" title="Information about one compressor.">EqCompressorInfo</a>: outputTokenType, outputTokenSize</li>
<li>Added flags: EQ_COMPRESSOR_CPU, EQ_COMPRESSOR_TRANSFER, EQ_COMPRESSOR_USE_TEXTURE_2D, EQ_COMPRESSOR_USE_TEXTURE_RECT, EQ_COMPRESSOR_USE_FRAMEBUFFER</li>
<li>Added data types: EQ_COMPRESSOR_DATATYPE_INVALID, EQ_COMPRESSOR_DATATYPE_RGBA_UNSIGNED_BYTE, EQ_COMPRESSOR_DATATYPE_RGBA_UNSIGNED_INT_8_8_8_8_REV, EQ_COMPRESSOR_DATATYPE_RGBA_UNSIGNED_INT_10_10_10_2, EQ_COMPRESSOR_DATATYPE_RGBA_HALF_FLOAT, EQ_COMPRESSOR_DATATYPE_RGBA_FLOAT, EQ_COMPRESSOR_DATATYPE_BGRA_UNSIGNED_BYTE, EQ_COMPRESSOR_DATATYPE_BGRA_UNSIGNED_INT_8_8_8_8_REV, EQ_COMPRESSOR_DATATYPE_BGRA_UNSIGNED_INT_10_10_10_2, EQ_COMPRESSOR_DATATYPE_BGRA_HALF_FLOAT, EQ_COMPRESSOR_DATATYPE_BGRA_FLOAT, EQ_COMPRESSOR_DATATYPE_DEPTH_UNSIGNED_FLOAT, EQ_COMPRESSOR_DATATYPE_DEPTH_UNSIGNED_INT, EQ_COMPRESSOR_DATATYPE_DEPTH_UNSIGNED_INT_24_8_NV, EQ_COMPRESSOR_DATATYPE_RGB_UNSIGNED_BYTE, EQ_COMPRESSOR_DATATYPE_RGB_HALF_FLOAT, EQ_COMPRESSOR_DATATYPE_RGB_FLOAT, EQ_COMPRESSOR_DATATYPE_BGR_UNSIGNED_BYTE, EQ_COMPRESSOR_DATATYPE_BGR_HALF_FLOAT, EQ_COMPRESSOR_DATATYPE_BGR_FLOAT</li>
<li>Added compressor type names: EQ_COMPRESSOR_DIFF_RLE_YUVA_50P, EQ_COMPRESSOR_RLE_YUVA_50P, EQ_COMPRESSOR_TRANSFER_RGBA_TO_RGBA, EQ_COMPRESSOR_TRANSFER_RGBA_TO_BGRA, EQ_COMPRESSOR_TRANSFER_RGBA_TO_RGBA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_TRANSFER_RGBA_TO_BGRA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_TRANSFER_RGB10A2_TO_RGB10A2, EQ_COMPRESSOR_TRANSFER_RGB10A2_TO_BGR10A2, EQ_COMPRESSOR_TRANSFER_RGBA16F_TO_RGBA16F, EQ_COMPRESSOR_TRANSFER_RGBA16F_TO_BGRA16F, EQ_COMPRESSOR_TRANSFER_RGBA32F_TO_RGBA32F, EQ_COMPRESSOR_TRANSFER_RGBA32F_TO_BGRA32F, EQ_COMPRESSOR_TRANSFER_RGBA32F_TO_BGRA_25P, EQ_COMPRESSOR_TRANSFER_RGBA32F_TO_RGBA_25P, EQ_COMPRESSOR_TRANSFER_RGBA32F_TO_BGRA16F_50P, EQ_COMPRESSOR_TRANSFER_RGBA32F_TO_RGBA16F_50P, EQ_COMPRESSOR_TRANSFER_RGBA_TO_YUVA_50P, EQ_COMPRESSOR_TRANSFER_RGB_TO_RGB, EQ_COMPRESSOR_TRANSFER_RGB_TO_BGR, EQ_COMPRESSOR_TRANSFER_RGB16F_TO_RGB16F, EQ_COMPRESSOR_TRANSFER_RGB16F_TO_BGR16F, EQ_COMPRESSOR_TRANSFER_RGB32F_TO_RGB32F, EQ_COMPRESSOR_TRANSFER_RGB32F_TO_BGR32F, EQ_COMPRESSOR_TRANSFER_RGB32F_TO_RGB_25P, EQ_COMPRESSOR_TRANSFER_RGB32F_TO_BGR_25P, EQ_COMPRESSOR_TRANSFER_RGB32F_TO_BGR16F_50P, EQ_COMPRESSOR_TRANSFER_RGB32F_TO_RGB16F_50P, EQ_COMPRESSOR_TRANSFER_RGB16F_TO_RGB_50P, EQ_COMPRESSOR_TRANSFER_RGB16F_TO_BGR_50P, EQ_COMPRESSOR_TRANSFER_RGBA16F_TO_RGBA_50P, EQ_COMPRESSOR_TRANSFER_RGBA16F_TO_BGRA_50P, EQ_COMPRESSOR_TRANSFER_DEPTH_TO_DEPTH_UNSIGNED_INT, EQ_COMPRESSOR_DIFF_RLE_RGBA, EQ_COMPRESSOR_DIFF_RLE_BGRA, EQ_COMPRESSOR_DIFF_RLE_RGBA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_DIFF_RLE_BGRA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_DIFF_RLE_RGB10_A2, EQ_COMPRESSOR_DIFF_RLE_BGR10_A2, EQ_COMPRESSOR_DIFF_RLE_RGB, EQ_COMPRESSOR_DIFF_RLE_BGR, EQ_COMPRESSOR_DIFF_RLE_DEPTH_UNSIGNED_INT, EQ_COMPRESSOR_RLE_RGBA16F, EQ_COMPRESSOR_RLE_BGRA16F, EQ_COMPRESSOR_DIFF_RLE_RGBA16F, EQ_COMPRESSOR_DIFF_RLE_BGRA16F, EQ_COMPRESSOR_DIFF_RLE_565_RGBA, EQ_COMPRESSOR_DIFF_RLE_565_BGRA, EQ_COMPRESSOR_DIFF_RLE_565_RGBA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_DIFF_RLE_565_BGRA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_DIFF_RLE_565_RGB10_A2, EQ_COMPRESSOR_DIFF_RLE_565_BGR10_A2, EQ_COMPRESSOR_RLE_RGBA, EQ_COMPRESSOR_RLE_BGRA, EQ_COMPRESSOR_RLE_RGBA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_RLE_BGRA_UINT_8_8_8_8_REV, EQ_COMPRESSOR_RLE_RGB10_A2, EQ_COMPRESSOR_RLE_BGR10_A2, EQ_COMPRESSOR_RLE_RGB, EQ_COMPRESSOR_RLE_BGR, EQ_COMPRESSOR_RLE_DEPTH_UNSIGNED_INT, EQ_COMPRESSOR_AG_RTT_JPEG_HQ, EQ_COMPRESSOR_AG_RTT_JPEG_MQ, EQ_COMPRESSOR_AG_RTT_JPEG_LQ</li>
</ul>
</li>
</ul>
<p>Version 2</p>
<ul>
<li>Added EQ_COMPRESSOR_DIFF_RLE_565 to type name registry</li>
<li>Added EQ_COMPRESSOR_DIFF_RLE_10A2 to type name registry</li>
<li>Added EQ_COMPRESSOR_DATATYPE_RGB10_A2 to token list</li>
</ul>
<p>Version 1</p>
<ul>
<li>Initial Release </li>
</ul>

<p>Definition in file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a311a438e742d0a2c6863d52e3d3918ea"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_CPU" ref="a311a438e742d0a2c6863d52e3d3918ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_CPU&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The compressor is a CPU compressor. </p>
<p>CPU compressors implement data compression and decompression of a block of memory. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00254">254</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a236e333245c13d38f69f04f3d8c576f8"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_DATA_1D" ref="a236e333245c13d38f69f04f3d8c576f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_DATA_1D&#160;&#160;&#160;0x2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The compressor can handle linear data (query time), or the input data is linear (compress, decompress). </p>
<p>Typically used for binary data. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00221">221</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="af91c63c27e93c17d87ab66e9242cc6ed"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_DATA_2D" ref="af91c63c27e93c17d87ab66e9242cc6ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_DATA_2D&#160;&#160;&#160;0x4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The compressor can handle two-dimensional data (query time), or the input data is two-dimensional (compress, decompress). </p>
<p>Typically used for image data. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00227">227</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a41f698f99a730b71794407af791425d1"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_IGNORE_ALPHA" ref="a41f698f99a730b71794407af791425d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_IGNORE_ALPHA&#160;&#160;&#160;0x8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The compressor can, does or should drop the alpha channel. </p>
<p>The plugin sets this flag during information time to indicate that it will drop the alpha channel (transfer plugins) or can drop the alpha channel (compressor plugins).</p>
<p>During download, the flag will always be set if it was set at query time. During compression, it will be set only if the alpha channel should be dropped. It will never be set for plugins which did not indicate this capability.</p>
<p>For compression plugins it is assumed that setting this flag improves the compression ratio by 25 percent. For transfer plugins, it is assumed that the ratio already includes the alpha reduction. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00244">244</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab9cdfbb7d31237c83b4faeae6a11bb0d"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_TRANSFER" ref="ab9cdfbb7d31237c83b4faeae6a11bb0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_TRANSFER&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The compressor is a CPU-GPU transfer engine. </p>
<p>GPU compressors implement to download from a GPU framebuffer or texture to main memory, as well as the corresponding upload. During this operation, compression might take place. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00262">262</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="af38c4f877c9393e7bcaa3a4e04eb54a8"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_USE_FRAMEBUFFER" ref="af38c4f877c9393e7bcaa3a4e04eb54a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_USE_FRAMEBUFFER&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Capability to use the frame buffer as source or destination. </p>
<p>If set, the transfer engine can (query time) or shall (compress time) use the frame buffer as the source or destination for its operations. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00284">284</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a631f4e55fc0fd01586027dd03d898c4c"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_USE_TEXTURE_2D" ref="a631f4e55fc0fd01586027dd03d898c4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_USE_TEXTURE_2D&#160;&#160;&#160;0x80</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Capability to use a GL_TEXTURE_2D texture as source or destination. </p>
<p>If set, the transfer engine can (query time) or shall (compress time) use a 2D texture as the source or destination for its operations. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00277">277</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a95c653f27f6f6ce1501f3362bb81ccf1"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_USE_TEXTURE_RECT" ref="a95c653f27f6f6ce1501f3362bb81ccf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_USE_TEXTURE_RECT&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Capability to use a GL_TEXTURE_RECTANGLE_ARB texture as source or destination. </p>
<p>If set, the transfer engine can (query time) or shall (compress time) use a rectangular texture as the source or destination for its operations. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00270">270</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d51ce5f0244528aa917bc49d6028dec"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_VERSION" ref="a1d51ce5f0244528aa917bc49d6028dec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_VERSION&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The version of the Compressor API described by this header. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00187">187</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a73e3544bef283514b5404cfd8504c9b7"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_VERSION_1" ref="a73e3544bef283514b5404cfd8504c9b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_VERSION_1&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>At least version 1 of the Compressor API is described by this header. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00189">189</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac88609b538391219e61844e3ecc70ce2"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_VERSION_2" ref="ac88609b538391219e61844e3ecc70ce2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_VERSION_2&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>At least version 2 of the Compressor API is described by this header. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00191">191</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab04beacee20a7cf909636b812b30636e"></a><!-- doxytag: member="compressor.h::EQ_COMPRESSOR_VERSION_3" ref="ab04beacee20a7cf909636b812b30636e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EQ_COMPRESSOR_VERSION_3&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>At least version 3 of the Compressor API is described by this header. </p>

<p>Definition at line <a class="el" href="compressor_8h_source.html#l00193">193</a> of file <a class="el" href="compressor_8h_source.html">compressor.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9b57dfdccdb79bc01a3ca7c6d6cfff1a"></a><!-- doxytag: member="compressor.h::EqCompressorCompress" ref="a9b57dfdccdb79bc01a3ca7c6d6cfff1a" args="(void *const compressor, const unsigned name, void *const in, const eq_uint64_t *inDims, const eq_uint64_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorCompress </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>compressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t *&#160;</td>
          <td class="paramname"><em>inDims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compress data. </p>
<p>The number of dimensions in the input and output data is given as a flag. The input dimensions give an offset and a size for each dimension in the format <code>dim0_offset, dim0_size, dim1_offset, ..., dimN_size</code>. The offset does not apply to the input pointer, it is merely a hint on where the data is positioned, e.g., where a 2D image is positioned in a virtual framebuffer. The size of the input data is <code>mul( inDims[1,3,...,n] ) * sizeof( info-&gt;dataType )</code>.<br/>
</p>
<p>The compressor has to store the results internally in its instance data. The result of the compression run will be queried later. Results of previous compression do not have to be retained, i.e., they can be overwritten on subsequent compression runs.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">compressor</td><td>the compressor instance. </td></tr>
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
    <tr><td class="paramname">in</td><td>the pointer to the input data. </td></tr>
    <tr><td class="paramname">inDims</td><td>the dimensions of the input data. </td></tr>
    <tr><td class="paramname">flags</td><td>capability flags for the compression. </td></tr>
  </table>
  </dd>
</dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="a033a5642aec0832c6a603f9ed1b35520"></a><!-- doxytag: member="compressor.h::EqCompressorDecompress" ref="a033a5642aec0832c6a603f9ed1b35520" args="(void *const decompressor, const unsigned name, const void *const *in, const eq_uint64_t *const inSizes, const unsigned numInputs, void *const out, eq_uint64_t *const outDims, const eq_uint64_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorDecompress </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>decompressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t *const&#160;</td>
          <td class="paramname"><em>inSizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>numInputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">eq_uint64_t *const&#160;</td>
          <td class="paramname"><em>outDims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decompress data. </p>
<p>The decompressor gets all result pointers as produced by the compressor as input. The routine should use the output buffer fully. For dimensions and output size see EqCompressorCompress.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">decompressor</td><td>the decompressor instance, can be 0. </td></tr>
    <tr><td class="paramname">name</td><td>the type name of the decompressor. </td></tr>
    <tr><td class="paramname">in</td><td>the pointer to an array of input data pointers. </td></tr>
    <tr><td class="paramname">inSizes</td><td>the array of input data sizes in bytes. </td></tr>
    <tr><td class="paramname">numInputs</td><td>the number of input data elements. </td></tr>
    <tr><td class="paramname">out</td><td>the pointer to a pre-allocated buffer for the uncompressed output result. </td></tr>
    <tr><td class="paramname">outDims</td><td>the dimensions of the output data. </td></tr>
    <tr><td class="paramname">flags</td><td>capability flags for the decompression. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="compressor_8h.html#a9b57dfdccdb79bc01a3ca7c6d6cfff1a" title="Compress data.">EqCompressorCompress</a> </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>outDims should be const, which was an oversight </dd></dl>

</div>
</div>
<a class="anchor" id="a4af897a56b806583b5c4b093446e07c5"></a><!-- doxytag: member="compressor.h::EqCompressorDeleteCompressor" ref="a4af897a56b806583b5c4b093446e07c5" args="(void *const compressor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorDeleteCompressor </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>compressor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release a compressor or downloader instance. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">compressor</td><td>the compressor instance to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="ab34434eafc0cb92b0b898e9381593c09"></a><!-- doxytag: member="compressor.h::EqCompressorDeleteDecompressor" ref="ab34434eafc0cb92b0b898e9381593c09" args="(void *const decompressor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorDeleteDecompressor </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>decompressor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release a decompressor instance. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">decompressor</td><td>the decompressor instance to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="a529e9fbf75442ee8d62c406898c1c8d1"></a><!-- doxytag: member="compressor.h::EqCompressorDownload" ref="a529e9fbf75442ee8d62c406898c1c8d1" args="(void *const compressor, const unsigned name, const GLEWContext *glewContext, const eq_uint64_t inDims[4], const unsigned source, const eq_uint64_t flags, eq_uint64_t outDims[4], void **out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorDownload </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>compressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GLEWContext *&#160;</td>
          <td class="paramname"><em>glewContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>inDims</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">eq_uint64_t&#160;</td>
          <td class="paramname"><em>outDims</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transfer frame buffer data into main memory. </p>
<p>This function has to transfer the specified frame buffer region or texture from the GPU memory into main memory. In the process, a transformation (including compression) of the data may take place. The result buffer has to be allocated by the compressor. The buffer has to be valied until the next call to this function or the destruction of this instance.</p>
<p>The correct OpenGL context is current and the frame buffer is bound correctly. The format and type of the input frame buffer are determined indirectly by the information provided by the plugin for the given compressor name, that is, the plugin has pre-declared the frame buffer type it processes during <a class="el" href="compressor_8h.html#a777d0298b72d8aa6838607dc2144eb07" title="Query information of the nth compressor in the DSO.">EqCompressorGetInfo()</a>.</p>
<p>The OpenGL context has been setup using Compositor::setupAssemblyState() using ??? pvp. If the OpenGL state is modified by this function, it has to reset it before leaving.</p>
<p>The pointer and data size is returned using the out parameters. The outDims parameter has the format <code>x, w, y, h</code>. If the compressor produces an image (structured data), the outDims should be set to a multiple of inDims. For unstructured data the values should be set to <code>x = 0, w = num_elements, y = 0, h = 1</code>. The output pointer has to be valid until the next call to this function using the same compressor instance.</p>
<p>Flags will always contain EQ_COMPRESSOR_DATA_2D, and may contain:</p>
<ul>
<li>EQ_COMPRESSOR_IGNORE_MSE if the alpha value of a color buffer may be dropped during download</li>
<li>EQ_COMPRESSOR_USE_TEXTURE_2D if the source is a 2D texture ID</li>
<li>EQ_COMPRESSOR_USE_TEXTURE_RECT if the source is a rectangle texture ID</li>
<li>EQ_COMPRESSOR_USE_FRAMEBUFFER if the source is an OpenGL frame buffer</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">compressor</td><td>the compressor instance. </td></tr>
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
    <tr><td class="paramname">glewContext</td><td>the initialized GLEW context describing corresponding to the current OpenGL context. </td></tr>
    <tr><td class="paramname">inDims</td><td>the dimensions of the input data (x, w, y, h). </td></tr>
    <tr><td class="paramname">source</td><td>texture name to if EQ_COMPRESSOR_USE_TEXTURE_2D or EQ_COMPRESSOR_USE_TEXTURE_RECT is set. </td></tr>
    <tr><td class="paramname">flags</td><td>capability flags for the compression (see description). </td></tr>
    <tr><td class="paramname">outDims</td><td>the dimensions of the output data (see description). </td></tr>
    <tr><td class="paramname">out</td><td>the pointer to the output data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="version"><dt><b>Version:</b></dt><dd>3 </dd></dl>

</div>
</div>
<a class="anchor" id="a777d0298b72d8aa6838607dc2144eb07"></a><!-- doxytag: member="compressor.h::EqCompressorGetInfo" ref="a777d0298b72d8aa6838607dc2144eb07" args="(const size_t n, EqCompressorInfo *const info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorGetInfo </td>
          <td>(</td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEqCompressorInfo.html">EqCompressorInfo</a> *const&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query information of the nth compressor in the DSO. </p>
<p>Plugins aiming to be backward-compatible, i.e., usable in older version than the one compiled against, have to carefully check the provided runtime version in info. If they implement features incompatible with older Equalizer versions, e.g., a CPU compressor with an outputTokenType different from tokenType, they either have to implement a compatibility code path or to disable the compressor by setting the tokenType to EQ_COMPRESSOR_DATATYPE_INVALID.</p>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="ae52553ae282ce687cca471bbdfb233fb"></a><!-- doxytag: member="compressor.h::EqCompressorGetNumCompressors" ref="ae52553ae282ce687cca471bbdfb233fb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API size_t EqCompressorGetNumCompressors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of compressors implemented in the DSO. </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="a3646188a0b27e50620ea1bf2ff2cfe87"></a><!-- doxytag: member="compressor.h::EqCompressorGetNumResults" ref="a3646188a0b27e50620ea1bf2ff2cfe87" args="(void *const compressor, const unsigned name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API unsigned EqCompressorGetNumResults </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>compressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the number of results produced by the last compression. </p>
<p>A compressor might generate multiple output stream, e.g., when operating on structured data or using parallel compression routines.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">compressor</td><td>the compressor instance. </td></tr>
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of output results. </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="ad1ffb6ee7db430b05413be0e8b920e07"></a><!-- doxytag: member="compressor.h::EqCompressorGetResult" ref="ad1ffb6ee7db430b05413be0e8b920e07" args="(void *const compressor, const unsigned name, const unsigned i, void **const out, eq_uint64_t *const outSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorGetResult </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>compressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **const&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">eq_uint64_t *const&#160;</td>
          <td class="paramname"><em>outSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the ith result of the last compression. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">compressor</td><td>the compressor instance. </td></tr>
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
    <tr><td class="paramname">i</td><td>the result index to return. </td></tr>
    <tr><td class="paramname">out</td><td>the return value to store the result pointer. </td></tr>
    <tr><td class="paramname">outSize</td><td>the return value to store the result size in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="a80ac98b11fc3a146c758871c024fda59"></a><!-- doxytag: member="compressor.h::EqCompressorIsCompatible" ref="a80ac98b11fc3a146c758871c024fda59" args="(const unsigned name, const GLEWContext *glewContext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API bool EqCompressorIsCompatible </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GLEWContext *&#160;</td>
          <td class="paramname"><em>glewContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if the compressor may be used with the current OpenGL context. </p>
<p>The OpenGL context is current, and has not be modified by this function. The given glewContext is an initialized GLEWContext corresponding to the OpenGL context. Typically this function checks for a given OpenGL version and/or extension required by the transfer engine.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
    <tr><td class="paramname">glewContext</td><td>the initialized GLEW context describing corresponding to the current OpenGL context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the compressor is compatible with the environment. </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>3 </dd></dl>

</div>
</div>
<a class="anchor" id="a5e7c2180cffa2dd75bbbf337315629dc"></a><!-- doxytag: member="compressor.h::EqCompressorNewCompressor" ref="a5e7c2180cffa2dd75bbbf337315629dc" args="(const unsigned name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void* EqCompressorNewCompressor </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiate a new compressor or a new downloader. </p>
<p>This function has to create a new instance of the given compressor type. Multiple instances might be used concurrently. One given instance is always used from one thread at any given time.</p>
<p>For one given name, there can only be one given implementation of a compressor or downloader. This type has been given by the plugin during getInfo.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an opaque pointer to the compressor instance. </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="a3bdbfcd8f109347cfb600ad6df36f5bf"></a><!-- doxytag: member="compressor.h::EqCompressorNewDecompressor" ref="a3bdbfcd8f109347cfb600ad6df36f5bf" args="(const unsigned name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void* EqCompressorNewDecompressor </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiate a new decompressor or a new uploader. </p>
<p>This function might create a new instance of the given decompressor type. Multiple instances might be used concurrently. One given instance is always used from one thread at any given time. State-less decompressors might return 0.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the type name of the decompressor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an opaque pointer to the decompressor instance, or 0 if no instance is needed by the implementation. </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1 </dd></dl>

</div>
</div>
<a class="anchor" id="a60382962fabfbc0cc7180ff0c2f6f562"></a><!-- doxytag: member="compressor.h::EqCompressorUpload" ref="a60382962fabfbc0cc7180ff0c2f6f562" args="(void *const decompressor, const unsigned name, const GLEWContext *glewContext, const void *buffer, const eq_uint64_t inDims[4], const eq_uint64_t flags, const eq_uint64_t outDims[4], const unsigned destination)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EQ_PLUGIN_API void EqCompressorUpload </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>decompressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const GLEWContext *&#160;</td>
          <td class="paramname"><em>glewContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>inDims</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const eq_uint64_t&#160;</td>
          <td class="paramname"><em>outDims</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>destination</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transfer data from main memory into GPU memory. </p>
<p>This function applies the inverse operation of EqCompressorDownload, that is, it transfers the specified buffer into the GPU. It may apply a transformation, including decompression, during its operation. At the end, the result must be located in the frame buffer or the provided texture.</p>
<p>The correct OpenGL context is current. The texture is initialized to the size provided by inDims and it is not bound. The OpenGL context has been setup using Compositor::setupAssemblyState() using ??? pvp. If the OpenGL state is modified by this function, it has to reset it before leaving.</p>
<p>The parameters buffer, inDims, flags will contain the same values as the parameters out, outDims, flags of the corresponding <a class="el" href="compressor_8h.html#a529e9fbf75442ee8d62c406898c1c8d1" title="Transfer frame buffer data into main memory.">EqCompressorDownload()</a> call. Please refer to the documentation of this function for further information.</p>
<p>Flags will always contain EQ_COMPRESSOR_DATA_2D, and may contain:</p>
<ul>
<li>EQ_COMPRESSOR_IGNORE_MSE if the alpha value of a color buffer may be dropped during upload</li>
<li>EQ_COMPRESSOR_USE_TEXTURE_2D if the destination is a 2D texture ID</li>
<li>EQ_COMPRESSOR_USE_TEXTURE_RECT if the destination is a rectancle texture ID</li>
<li>EQ_COMPRESSOR_USE_FRAMEBUFFER if the destination is an OpenGL frame buffer</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">decompressor</td><td>the compressor instance. </td></tr>
    <tr><td class="paramname">name</td><td>the type name of the compressor. </td></tr>
    <tr><td class="paramname">glewContext</td><td>the initialized GLEW context corresponding to the current OpenGL context. </td></tr>
    <tr><td class="paramname">buffer</td><td>the input data. </td></tr>
    <tr><td class="paramname">inDims</td><td>the dimension of the input data. </td></tr>
    <tr><td class="paramname">flags</td><td>capability flags for the compression. </td></tr>
    <tr><td class="paramname">outDims</td><td>the result data size in the frame buffer. </td></tr>
    <tr><td class="paramname">destination</td><td>the destination texture name if EQ_COMPRESSOR_USE_TEXTURE_2D or EQ_COMPRESSOR_USE_TEXTURE_RECT is set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="version"><dt><b>Version:</b></dt><dd>3 </dd></dl>

</div>
</div>
</div>
<address style="text-align: right;">
  <small>Generated on Sun May 8 2011 19:11:50 for 
    <a href="/index.html"><img src="/images/Collage.png" 
                               alt="Collage" align="middle" 
                               border="0"></a> 0.3 by&nbsp;
    <a href="http://www.doxygen.org/index.html">
      <img src="doxygen.png" alt="doxygen" align="middle" border="0">
    </a> 1.7.3 
  </small>
</address>
</body>
</html>

