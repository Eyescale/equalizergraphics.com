














<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>



    <meta name="author" content="Stefan Eilemann">







    <meta name="robots" content="index,follow">
    <link rev="made" href="mailto:webmaster@equalizergraphics.com" title="Stefan Eilemann">
    <link rel="home" href="http://www.equalizergraphics.com/" title="Home Page">
    <link rel="icon" href="http://www.equalizergraphics.com/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/stylesheet.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/print.css" type="text/css" media="print">
    <link rel="alternate" title="Equalizer RSS"
          href="http://www.equalizergraphics.com/equalizer.rdf"
          type="application/rss+xml">
    <script type="text/javascript"
            src="http://apis.google.com/js/plusone.js"></script>

    <title>Equalizer: Documentation: Developer: Nonthreaded Rendering</title>
  </head>

  <body>
    <div class="poll">
        <a href="http://www.equalizergraphics.com/">

          <img src="/images/Equalizer.png" alt="Equalizer logo" class="active"></a>



        <br>
        <a href="http://www.libcollage.net">



          <img src="/images/Collage_g.png" alt="Collage logo"></a>

        <br>
        <a href="http://www.equalizergraphics.com/gpu-sd">



          <img src="/images/gpusd_g.png" alt="GPU-SD logo"></a>

        <br>

      <!-- What is new? -->
      <div class="subnavigation"><center>
          <b>What is new?</b><br>
          <a href="https://github.com/Eyescale/equalizergraphics.com/commits/master/">Latest Website Changes</a><br>
          <a href="https://github.com/Eyescale/Equalizer/commits/master/">Latest
            Source Code Changes</a><br>
          <a href="http://pogl.wordpress.com/">Developer Blog</a><br>
          <b>New:</b><a href="http://twitter.com/EqualizerTricks">Tips &amp; Tricks on Twitter</a>
      </center></div>

    </div>
    <div class="header">
      <a name="top"></a>

      <h1>Nonthreaded Rendering</h1>







    </div>

    <!-- Footer line -->
    <div class="footer">
      <a href="/documents/design/nonthreaded.html#top" class="rule">Back to top</a>
      <a href="mailto:info@equalizergraphics.com?subject=Question regarding Equalizer: Documentation: Developer: Nonthreaded Rendering" class="rule">Questions?</a>
      <a href="/impressum.html" class="rule">Impressum</a>

      <a href="https://github.com/Eyescale/equalizergraphics.com/commits/master/documents/design/nonthreaded.shtml" class="rule">Changed Sat Jun 7 12:00:51 2008 +0000</a>

      <a href="#search">Search</a>
    </div>

    <!-- Navigation -->
    <div class="navigation">





      <p><a href="/index.html"



            >About</a></p>

      <!-- About sub-navigation-->

      <p><a href="/features.html"



            >Features</a></p>


      <p><a href="/applications.html"



            >Applications</a></p>

      <!-- Applications sub-navigation-->

      <p><a href="/documentation.html"



            >Documentation</a></p>

      <!-- Documentation sub-navigation-->

      <div class="subnavigation">
        <p><a href="/documentation/user.html"



              >User</a></p>

        <p><a href="/documentation/developer.html"

              class="used"

              >Developer</a></p>

        <p><a href="/documentation/publications.html"



              >Publications</a></p>

        <p><a href="/relnotes.html"



              >Release Notes</a></p>

        <p><a href="/documentation/performance.html"



              >Performance Studies</a></p>

        <p><a href="/compatibility.html"



              >Compatibility Matrix</a></p>

        <p><a href="/documentation/parallelOpenGLFAQ.html"



              >Parallel GL FAQ</a></p>
      </div>


      <p><a href="/support.html"



            >Support</a></p>

      <!-- Support sub-navigation-->

      <p><a href="/gallery.html"



            >Gallery</a></p>


      <p><a href="/downloads.html"



            >Downloads</a></p>

      <!-- Downloads sub-navigation-->

      <p><a href="/news.html"



            >News</a></p>


      <p><a href="/events.html"



            >Events</a></p>


      <p><a href="/contributions.html"



            >Contributions</a></p>

      <p><a href="/survey.html"



            >Survey</a></p>




      <div class="float_right"><g:plusone></g:plusone></div>
      <div class="flush_float"></div
      <!-- social bookmark sites -->
      <div class="social">
        <div class="addthis_toolbox addthis_default_style ">
          <a class="addthis_button_preferred_1"></a>
          <a class="addthis_button_preferred_2"></a>
          <a class="addthis_button_preferred_3"></a>
          <a class="addthis_button_preferred_4"></a>
          <a class="addthis_button_compact"></a>
          <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <script type="text/javascript">var addthis_config =
          {"data_track_addressbar":true};</script>
        <script type="text/javascript"
                src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=eile">
        </script>
        <script type="text/javascript">
          var addthis_config = {
          data_track_clickback: false
          }
      </script>
      </div>

    </div>
    <div class="content">


<p>
  Author: <a href="mailto:eilemann@gmail.com">eilemann@gmail.com</a><br>
  State:
  <ul>
    <li>Implemented in 0.3 beta</li>
    <li>Adapted in 0.4 to reflect changes from per-node thread
      synchronization</li>
  </ul>
</p>

<h2>Overview</h2>
<p>
  In order to provide an easier porting path for existing software, this feature
  adds the capability to update certain windows from the main application
  thread, i.e., they are nonthreaded. This allows applications with an existing
  main GUI loop and OpenGL drawables to have them updated by Equalizer, while
  using additional resources for scalable rendering or as auxilary
  views. Updating windows from the main thread avoids thread-safety issues with
  the windowing system and widget library.
</p>
<p>
  Using nonthreaded channels as a source for scalable rendering is not a
  supported use case, i.e., a nonthreaded channel should not produce any output
  frames. A nonthreaded channel can contribute to the rendering of its own view,
  as this does not create any dependency for other channels.
</p><p>
  Nonthreaded execution on render client processes happens in the main thread,
  similar to the execution on the application process.
</p>

<h2>Implementation</h2>
<p>
  The server will send the rendering commands for nonthreaded pipes exactly as
  it does send them to threaded pipes. The receiver thread will queue them on
  the node's command queue, exactly in the same way as for threaded pipe
  commands. The queued commands will be checked and executed from the config
  frame functions, which are called by the application thread.
</p>
<p>
  <code>Config::finishFrame</code> will execute all rendering tasks until the
  local synchronization is released and the frame <code>current-latency</code>
  is finished.
</p>

<h3>Reasoning</h3>
<p>
  The main decision is where and when (latency-wise) the rendering commands are
  executed. The (not yet implemented) cull queue/frame data API will send the
  data between startFrame and finishFrame. Therefore, the draw tasks have to be
  executed from finishFrame, otherwise they would deadlock on data when executed
  from startFrame.
</p>
<p>
  The tasks are executed in the same order as on threaded pipes to keep the
  order of execution consistent. This means that input frames on non-threaded
  channels block the application thread, which typically inhibits a latency
  greater than one, since no new startFrame can be issued.
</p>
<p>
  Non-threaded execution is less important than in Equalizer v0.3, since a new
  <a href="/documents/design/threads.html#sync">per-node frame
  synchronization</a> has been introduced.
</p>

<h3>Implications</h3>
<p>
  Using a swapbarrier or output frame on nonthreaded channels will block the
  associated threaded channels until the latency has been reached. This
  partially disables the performance benefits of latency. Note that executing
  the render tasks early would disable latency by prohibiting the start of a new
  frame.
</p>

<h2>API</h2>
<p>
No changes.
</p>

<h2>File Format</h2>
<!-- /* --><pre>
  global
  {
      EQ_PIPE_IATTR_HINT_THREAD   off | on
  }

  pipe
  {
      attributes
      {
          hint_thread   off | on
      }
  }
</pre><!-- */ -->

<h2>Open Issues</h2>
<p>
  Multiple nonthreaded pipes with different window systems on the same node are
  not supported.
</p>
<p>
  Revisit introduction of window threads.
</p>




  <!-- Search Results -->
  <div class="flush_float"></div>
  <div class="search"><a name="search"></a>
    <div id="cse"></div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function(){
      var customSearchControl = new
      google.search.CustomSearchControl('003884678311182543665:v1o4knw6fuq');
      customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
      customSearchControl.draw('cse');
      }, true);
    </script>
    <link rel="stylesheet"
          href="http://www.google.com/cse/style/look/default.css"
          type="text/css" />
  </div>

  <!-- social bookmark sites, added here again for convenience and to WAR
       ignored bottom margin on IE7 -->
  <div class="social">
    <script type="text/javascript">addthis_pub = 'eile';</script>
    <a href="http://www.addthis.com/bookmark.php"
       onmouseover="return addthis_open(this, '', '[URL]', '[TITLE]')"
       onmouseout="addthis_close()"
       onclick="return addthis_sendto()">
      <img src="http://s9.addthis.com/button1-bm.gif" width="125" height="16"
           border="0" alt="" />
    </a>
    <script type="text/javascript"
            src="http://s7.addthis.com/js/152/addthis_widget.js">
    </script>
  </div>

</div> <!-- div content -->


<!-- Google Analytics -->
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-63007-1");
  pageTracker._trackPageview();
  } catch(err) {}
</script>

</body>

</html>

<!-- $Id$ -->
