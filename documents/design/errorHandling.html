











<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>



    <meta name="author" content="Stefan Eilemann">







    <meta name="robots" content="index,follow">
    <link rev="made" href="mailto:webmaster@equalizergraphics.com" title="Stefan Eilemann">
    <link rel="home" href="http://www.equalizergraphics.com/" title="Home Page">
    <link rel="icon" href="http://www.equalizergraphics.com/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/stylesheet.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/print.css" type="text/css" media="print">
    <link rel="alternate" title="Equalizer RSS"
          href="http://www.equalizergraphics.com/equalizer.rdf"
          type="application/rss+xml">
    <script type="text/javascript"
            src="http://apis.google.com/js/plusone.js"></script>

    <title>Equalizer: Documentation: Developer: Error Handling</title>
  </head>

  <body>
    <div class="poll">
        <a href="http://www.equalizergraphics.com/">

          <img src="/images/Equalizer.png" alt="Equalizer logo" class="active"></a>



        <br>
        <a href="http://www.libcollage.net">



          <img src="/images/Collage_g.png" alt="Collage logo"></a>

        <br>
        <a href="http://www.equalizergraphics.com/gpu-sd">



          <img src="/images/gpusd_g.png" alt="GPU-SD logo"></a>

        <br>

      <!-- What is new? -->
      <div class="subnavigation"><center>
          <b>What is new?</b><br>
          <a href="https://github.com/Eyescale/equalizergraphics.com/commits/master/">Latest Website Changes</a><br>
          <a href="https://github.com/Eyescale/Equalizer/commits/master/">Latest
            Source Code Changes</a><br>
          <a href="http://pogl.wordpress.com/">Developer Blog</a><br>
          <b>New:</b><a href="http://twitter.com/EqualizerTricks">Tips &amp; Tricks on Twitter</a>
      </center></div>

    </div>
    <div class="header">
      <a name="top"></a>

      <h1>Error Handling</h1>







    </div>

    <!-- Footer line -->
    <div class="footer">
      <a href="/documents/design/errorHandling.html#top" class="rule">Back to top</a>
      <a href="mailto:info@equalizergraphics.com?subject=Question regarding Equalizer: Documentation: Developer: Error Handling" class="rule">Questions?</a>
      <a href="/impressum.html" class="rule">Impressum</a>

      <a href="https://github.com/Eyescale/equalizergraphics.com/commits/master/documents/design/errorHandling.shtml" class="rule">Changed </a>

      <a href="#search">Search</a>
    </div>

    <!-- Navigation -->
    <div class="navigation">




      <p><a href="/index.html"



            >About</a></p>

      <!-- About sub-navigation-->

      <p><a href="/features.html"



            >Features</a></p>


      <p><a href="/applications.html"



            >Applications</a></p>

      <!-- Applications sub-navigation-->

      <p><a href="/documentation.html"



            >Documentation</a></p>

      <!-- Documentation sub-navigation-->

      <div class="subnavigation">
        <p><a href="/documentation/user.html"



              >User</a></p>

        <p><a href="/documentation/developer.html"

              class="used"

              >Developer</a></p>

        <p><a href="/documentation/publications.html"



              >Publications</a></p>

        <p><a href="/relnotes.html"



              >Release Notes</a></p>

        <p><a href="/documentation/performance.html"



              >Performance Studies</a></p>

        <p><a href="/compatibility.html"



              >Compatibility Matrix</a></p>

        <p><a href="/documentation/parallelOpenGLFAQ.html"



              >Parallel GL FAQ</a></p>
      </div>


      <p><a href="/support.html"



            >Support</a></p>

      <!-- Support sub-navigation-->

      <p><a href="/gallery.html"



            >Gallery</a></p>


      <p><a href="/downloads.html"



            >Downloads</a></p>

      <!-- Downloads sub-navigation-->

      <p><a href="/news.html"



            >News</a></p>


      <p><a href="/events.html"



            >Events</a></p>


      <p><a href="/contributions.html"



            >Contributions</a></p>

      <p><a href="/survey.html"



            >Survey</a></p>




      <div class="float_right"><g:plusone></g:plusone></div>
      <div class="flush_float"></div
      <!-- social bookmark sites -->
      <div class="social">
        <div class="addthis_toolbox addthis_default_style ">
          <a class="addthis_button_preferred_1"></a>
          <a class="addthis_button_preferred_2"></a>
          <a class="addthis_button_preferred_3"></a>
          <a class="addthis_button_preferred_4"></a>
          <a class="addthis_button_compact"></a>
          <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <script type="text/javascript">var addthis_config =
          {"data_track_addressbar":true};</script>
        <script type="text/javascript"
                src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=eile">
        </script>
        <script type="text/javascript">
          var addthis_config = {
          data_track_clickback: false
          }
      </script>
      </div>

    </div>
    <div class="content">


<p>Author: <a href="mailto:eile@eyescale.ch">Stefan Eilemann</a></p>
<p>State: Design</p>
<h2 id="overview">Overview</h2>
<p>This feature replaces the setErrorMessage used primarily during
initialization with an error number and a global error number to string
registry. It allows applications more easily to detect which operation
has failed, and simplifies the error network transport.</p>
<h2 id="requirements">Requirements</h2>
<p>Provide integer error number and facilities for number-to-string conversion.</p>
<h2 id="design">Design</h2>
<p>Equalizer defines a set of error numbers starting at 0. A value is
provided which is the minumum value defined by applications, which can
define their own error numbers and should register an error string for
this number.</p>
<p>Equalizer only transports the error number. The application is
responsible for keeping the application-specific errors consistent
across processes. Equalizer translates the error number to a string in
log output, if a string for the error is registered.</p>
<p>Equalizer error strings are registered in each namespace's init function
and removed in exit.</p>
<h2 id="api">API</h2>
<p>New functions:</p>
<pre><code>void ComputeContext::setError( const uint32_t error );
Error ComputeContext::getError() const;

Error util::FrameBufferObject::getError() const;

// Attn affects all entities:
void fabric::Object::setError( const uint32_t error );
Error fabric::Object::getError() const;

static ErrorRegistry&amp; base::Global::getErrorRegistry();

class ErrorRegistry
{
public:
    const std::string&amp; getString( const uint32_t error );
    void setString( const uint32_t error, const std::string&amp; text );
    void eraseString( const uint32_t error );

private:
    stde::hash_map&lt; uint32_t, std::string &gt; _errors;
};

namespace eq
{
namespace base
{
    enum Error
    {
        ERROR_CUSTOM = EQ_64KB
    };
}
namespace net
{
    enum Error
    {
        ERROR_CUSTOM = base::ERROR_CUSTOM + EQ_64KB
    };
}

    enum Error
    {
        ERROR_WGL_TBD = net::ERROR_CUSTOM,
        ERROR_AGL_TBD,
        ...
        ERROR_CUSTOM = net::ERROR_CUSTOM + EQ_64KB
    };
    std::ostream&amp; operator &lt;&lt; ( std::ostream&amp; os, const Error&amp; error );
}
</code></pre>
<p>Removed functions:</p>
<pre><code>void ComputeContext::setErrorMessage( const std::string&amp; error );
const std::string&amp; ComputeContext::getErrorMessage() const;

void SystemPipe::setErrorMessage( const std::string&amp; error );
const std::string&amp; SystemPipe::getErrorMessage() const;

const std::string&amp; util::FrameBufferObject::getErrorMessage() const;

void fabric::Object::setErrorMessage( const std::string&amp; error );
const std::string&amp; fabric::Object::getErrorMessage() const;
</code></pre>
<h2 id="file-format">File Format</h2>
<p>No changes.</p>
<h2 id="restrictions">Restrictions</h2>
<p>Error registration is not thread-safe.</p>
<h2 id="issues">Issues</h2>
<h3 id="q1-is-error-registration-thread-safe">Q1: Is error registration thread-safe?</h3>
<p>Resolved: No.</p>
<p>Error registration typically happens once during application
initialization. If thread-safety is required, an external mutex may be
used.</p>
<h3 id="q2-where-is-the-error-registry-located">Q2: Where is the error registry located?</h3>
<p>Resolved: in the <code>eq::base</code> namespace.</p>
<p>While Equalizer currently uses errors only in the client initialization,
error handling is a base functionality and we may later use it in the
lower namespaces.</p>
<p>Each namespace will have it's own list of errors, which are built 'on
top' of each other.</p>
<h3 id="q3-what-about-arguments-used-in-the-error-string">Q3: What about arguments used in the error string?</h3>
<p>Resolved: The system error code or other information is not part of this
feature.</p>
<p>Sometimes it is useful to include arguments, such as the system error
code, in the error message. The system error can't be translated on
another node, since it potentially uses another operating system.</p>
<p>Since most of the auxilary information is not strictly needed on the
remote system it will not be transported. The local client creating the
error will output detailed information and send a generic error code,
which may refer to the client log.</p>



  <!-- Search Results -->
  <div class="flush_float"></div>
  <div class="search"><a name="search"></a>
    <div id="cse"></div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function(){
      var customSearchControl = new
      google.search.CustomSearchControl('003884678311182543665:v1o4knw6fuq');
      customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
      customSearchControl.draw('cse');
      }, true);
    </script>
    <link rel="stylesheet"
          href="http://www.google.com/cse/style/look/default.css"
          type="text/css" />
  </div>

  <!-- social bookmark sites, added here again for convenience and to WAR
       ignored bottom margin on IE7 -->
  <div class="social">
    <script type="text/javascript">addthis_pub = 'eile';</script>
    <a href="http://www.addthis.com/bookmark.php"
       onmouseover="return addthis_open(this, '', '[URL]', '[TITLE]')"
       onmouseout="addthis_close()"
       onclick="return addthis_sendto()">
      <img src="http://s9.addthis.com/button1-bm.gif" width="125" height="16"
           border="0" alt="" />
    </a>
    <script type="text/javascript"
            src="http://s7.addthis.com/js/152/addthis_widget.js">
    </script>
  </div>

</div> <!-- div content -->


<!-- Google Analytics -->
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-63007-1");
  pageTracker._trackPageview();
  } catch(err) {}
</script>

</body>

</html>

